# å‰åç«¯è¿æ¥å®Œæ•´æ€§æ£€æŸ¥æŠ¥å‘Š

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäºVue.jså‰ç«¯å’ŒSpring Bootåç«¯çš„ç”µå•†å¹³å°ï¼Œå·²ç»å®ç°äº†åŸºæœ¬çš„å‰åç«¯æ•°æ®è¿æ¥ã€‚é€šè¿‡è¯¦ç»†æ£€æŸ¥ï¼Œæˆ‘å‘ç°é¡¹ç›®åœ¨å‰åç«¯æ•°æ®æµé€šæ–¹é¢å·²ç»æœ‰äº†è‰¯å¥½çš„åŸºç¡€æ¶æ„ï¼Œä½†è¿˜æœ‰ä¸€äº›å¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ã€‚

## âœ… å·²å®ç°çš„åŠŸèƒ½

### 1. ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- **å‰ç«¯å®ç°**: 
  - ç™»å½•é¡µé¢ (`Login.vue`) è°ƒç”¨ `/api/auth/login` API
  - æ³¨å†Œé¡µé¢ (`Register.vue`) è°ƒç”¨ `/api/auth/register` API
  - Tokenè‡ªåŠ¨ç®¡ç†å’Œè¯·æ±‚æ‹¦æˆªå™¨é…ç½®
  - VuexçŠ¶æ€ç®¡ç†ç”¨æˆ·ä¿¡æ¯

- **åç«¯å®ç°**:
  - `AuthController` æä¾›ç™»å½•ã€æ³¨å†Œã€ç™»å‡ºAPI
  - ç”¨æˆ·æ•°æ®æŒä¹…åŒ–åˆ°æ•°æ®åº“
  - Tokenç”Ÿæˆå’ŒéªŒè¯æœºåˆ¶

### 2. å•†å“æ•°æ®ç®¡ç†
- **å‰ç«¯å®ç°**:
  - é¦–é¡µ (`Home.vue`) ä»åç«¯è·å–å•†å“æ•°æ®
  - å•†å“åˆ—è¡¨ (`ProductList.vue`) æ”¯æŒæœç´¢ã€ç­›é€‰ã€åˆ†é¡µ
  - å•†å“è¯¦æƒ…é¡µé¢å±•ç¤ºåç«¯æ•°æ®
  - é”™è¯¯å¤„ç†å’Œé™çº§åˆ°æ¨¡æ‹Ÿæ•°æ®

- **åç«¯å®ç°**:
  - `ProductController` æä¾›å®Œæ•´çš„CRUDæ“ä½œ
  - å•†å“æœç´¢ã€ä»·æ ¼ç­›é€‰åŠŸèƒ½
  - æ•°æ®åº“æŒä¹…åŒ–å­˜å‚¨

### 3. è®¢å•ç®¡ç†ç³»ç»Ÿ
- **å‰ç«¯å®ç°**:
  - è®¢å•åˆ—è¡¨ (`OrderList.vue`) ä»åç«¯è·å–ç”¨æˆ·è®¢å•
  - ç»“ç®—é¡µé¢ (`Checkout.vue`) åˆ›å»ºè®¢å•åˆ°åç«¯
  - è®¢å•çŠ¶æ€æ›´æ–°åŠŸèƒ½
  - è´­ç‰©è½¦çŠ¶æ€ç®¡ç†

- **åç«¯å®ç°**:
  - `OrderController` æä¾›è®¢å•CRUDæ“ä½œ
  - æŒ‰ç”¨æˆ·ã€çŠ¶æ€ç­›é€‰è®¢å•
  - è®¢å•çŠ¶æ€æ›´æ–°API

### 4. è´­ç‰©è½¦æ•°æ®ç®¡ç†
- **å‰ç«¯å®ç°**:
  - Vuex Storeç»Ÿä¸€ç®¡ç†è´­ç‰©è½¦çŠ¶æ€
  - è´­ç‰©è½¦æ•°æ®åŒæ­¥åˆ°localStorage
  - è´­ç‰©è½¦å¢åˆ æ”¹æŸ¥æ“ä½œ

### 5. æ•°æ®æŒä¹…åŒ–
- **æ•°æ®åº“é…ç½®**: H2æ•°æ®åº“é…ç½®å’Œåˆå§‹åŒ–è„šæœ¬
- **æµ‹è¯•æ•°æ®**: å®Œæ•´çš„å•†å“ã€ç”¨æˆ·ã€è®¢å•æµ‹è¯•æ•°æ®
- **ORMæ˜ å°„**: JPAå®ä½“ç±»å’Œæ•°æ®åº“è¡¨æ˜ å°„

## ğŸ” è¯¦ç»†åˆ†æ

### å‰ç«¯æ•°æ®è°ƒç”¨åˆ†æ

#### é¦–é¡µæ•°æ®è·å– (`Home.vue`)
```javascript
// ä»åç«¯è·å–æ–°å“æ¨è
async fetchNewProducts() {
  const response = await this.$http.get('/products')
  this.newProducts = response.data.slice(0, 4)
}

// ä»åç«¯è·å–å•†å®¶æ•°æ®
async fetchSellers() {
  const response = await this.$http.get('/sellers')
  this.sellers = response.data.slice(0, 3)
}
```

#### å•†å“åˆ—è¡¨é¡µæ•°æ®è·å– (`ProductList.vue`)
```javascript
// æ”¯æŒæœç´¢å’Œç­›é€‰çš„å•†å“è·å–
async fetchProducts() {
  const params = {}
  if (this.searchQuery) params.name = this.searchQuery
  if (this.priceRange[0] > 0) params.minPrice = this.priceRange[0]
  
  const response = await this.$http.get('/products', { params })
  this.products = response.data
}
```

#### è®¢å•æ•°æ®ç®¡ç† (`OrderList.vue`)
```javascript
// è·å–ç”¨æˆ·è®¢å•
async fetchOrders() {
  const userInfo = JSON.parse(localStorage.getItem('userInfo'))
  const response = await this.$http.get(`/orders/customer/${userInfo.id}`)
  this.orders = response.data
}

// è®¢å•çŠ¶æ€æ›´æ–°
async confirmReceived(orderId) {
  await this.$http.patch(`/orders/${orderId}/status`, null, {
    params: { status: 'COMPLETED' }
  })
  this.fetchOrders() // é‡æ–°è·å–æ•°æ®
}
```

### åç«¯APIåˆ†æ

#### è®¤è¯æ§åˆ¶å™¨ (`AuthController.java`)
- âœ… ç™»å½•éªŒè¯å’ŒTokenç”Ÿæˆ
- âœ… ç”¨æˆ·æ³¨å†Œå’Œæ•°æ®éªŒè¯
- âœ… è·¨åŸŸé…ç½®æ”¯æŒå‰ç«¯è°ƒç”¨

#### å•†å“æ§åˆ¶å™¨ (`ProductController.java`)
- âœ… å®Œæ•´çš„CRUDæ“ä½œ
- âœ… å•†å“æœç´¢å’Œç­›é€‰
- âœ… åº“å­˜ç®¡ç†åŠŸèƒ½

#### è®¢å•æ§åˆ¶å™¨ (`OrderController.java`)
- âœ… è®¢å•åˆ›å»ºå’ŒæŸ¥è¯¢
- âœ… è®¢å•çŠ¶æ€ç®¡ç†
- âœ… æŒ‰ç”¨æˆ·å’ŒçŠ¶æ€ç­›é€‰

### æ•°æ®æµé€šéªŒè¯

#### ç”¨æˆ·æ³¨å†Œâ†’ç™»å½•â†’è´­ç‰©â†’ä¸‹å•æµç¨‹
1. **æ³¨å†Œ**: å‰ç«¯æäº¤ç”¨æˆ·ä¿¡æ¯ â†’ åç«¯ä¿å­˜åˆ°æ•°æ®åº“ â†’ è¿”å›ç”¨æˆ·ä¿¡æ¯å’ŒToken
2. **ç™»å½•**: å‰ç«¯éªŒè¯ç”¨æˆ· â†’ åç«¯æ£€æŸ¥æ•°æ®åº“ â†’ è¿”å›è®¤è¯ä¿¡æ¯
3. **æµè§ˆå•†å“**: å‰ç«¯è°ƒç”¨å•†å“API â†’ åç«¯æŸ¥è¯¢æ•°æ®åº“ â†’ è¿”å›å•†å“åˆ—è¡¨
4. **æ·»åŠ è´­ç‰©è½¦**: å‰ç«¯Vuexç®¡ç† â†’ æœ¬åœ°å­˜å‚¨ä¿å­˜ â†’ ç»“ç®—æ—¶å‘é€åˆ°åç«¯
5. **åˆ›å»ºè®¢å•**: å‰ç«¯æäº¤è®¢å•æ•°æ® â†’ åç«¯ä¿å­˜åˆ°æ•°æ®åº“ â†’ è¿”å›è®¢å•ä¿¡æ¯

## ğŸš€ ä¼˜åŒ–å»ºè®®

### 1. æ•°æ®åŒæ­¥ä¼˜åŒ–

#### è´­ç‰©è½¦æ•°æ®åŒæ­¥
å½“å‰è´­ç‰©è½¦åªä¿å­˜åœ¨å‰ç«¯localStorageï¼Œå»ºè®®æ·»åŠ åç«¯åŒæ­¥ï¼š

```javascript
// å‰ç«¯Vuex action
async syncCartToServer({ commit, state }) {
  if (state.user) {
    await this.$http.post('/cart/sync', { items: state.cart })
  }
}

// ç™»å½•ååŒæ­¥è´­ç‰©è½¦
async loadCartFromServer({ commit }) {
  const response = await this.$http.get('/cart')
  commit('setCart', response.data.items)
}
```

#### å®æ—¶æ•°æ®æ›´æ–°
æ·»åŠ WebSocketè¿æ¥ï¼Œå®ç°è®¢å•çŠ¶æ€å®æ—¶æ›´æ–°ï¼š

```javascript
// å‰ç«¯WebSocketè¿æ¥
const socket = new WebSocket('ws://localhost:8080/websocket')
socket.onmessage = (event) => {
  const data = JSON.parse(event.data)
  if (data.type === 'ORDER_STATUS_UPDATE') {
    this.$store.commit('updateOrderStatus', data.order)
  }
}
```

### 2. æ•°æ®éªŒè¯å¢å¼º

#### å‰ç«¯è¡¨å•éªŒè¯
```javascript
// å¢å¼ºçš„è®¢å•åˆ›å»ºéªŒè¯
const orderRules = {
  shippingAddress: [
    { required: true, message: 'è¯·è¾“å…¥æ”¶è´§åœ°å€' },
    { min: 10, message: 'åœ°å€é•¿åº¦ä¸èƒ½å°‘äº10ä¸ªå­—ç¬¦' }
  ],
  receiverPhone: [
    { required: true, message: 'è¯·è¾“å…¥è”ç³»ç”µè¯' },
    { pattern: /^1[3-9]\d{9}$/, message: 'è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·' }
  ]
}
```

#### åç«¯æ•°æ®æ ¡éªŒ
```java
// åç«¯å®ä½“éªŒè¯
@Entity
public class Order {
    @NotBlank(message = "æ”¶è´§åœ°å€ä¸èƒ½ä¸ºç©º")
    @Size(min = 10, message = "åœ°å€é•¿åº¦ä¸èƒ½å°‘äº10ä¸ªå­—ç¬¦")
    private String shippingAddress;
    
    @Pattern(regexp = "^1[3-9]\\d{9}$", message = "æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®")
    private String receiverPhone;
}
```

### 3. é”™è¯¯å¤„ç†æ”¹è¿›

#### ç»Ÿä¸€é”™è¯¯å¤„ç†
```javascript
// å‰ç«¯å…¨å±€é”™è¯¯å¤„ç†
axios.interceptors.response.use(
  response => response,
  error => {
    if (error.response?.status === 500) {
      this.$message.error('æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•')
    } else if (error.response?.status === 404) {
      this.$message.error('è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨')
    }
    return Promise.reject(error)
  }
)
```

#### åç«¯å¼‚å¸¸å¤„ç†
```java
@ControllerAdvice
public class GlobalExceptionHandler {
    @ExceptionHandler(ValidationException.class)
    public ResponseEntity<Map<String, Object>> handleValidation(ValidationException e) {
        Map<String, Object> response = new HashMap<>();
        response.put("success", false);
        response.put("message", e.getMessage());
        return ResponseEntity.badRequest().body(response);
    }
}
```

### 4. æ€§èƒ½ä¼˜åŒ–

#### å‰ç«¯åˆ†é¡µä¼˜åŒ–
```javascript
// è™šæ‹Ÿæ»šåŠ¨å¤§æ•°æ®åˆ—è¡¨
async fetchProductsWithPagination(page, size) {
  const response = await this.$http.get('/products', {
    params: { page, size }
  })
  return {
    data: response.data.content,
    total: response.data.totalElements
  }
}
```

#### åç«¯ç¼“å­˜æœºåˆ¶
```java
@Service
public class ProductService {
    @Cacheable("products")
    public List<Product> getAllProducts() {
        return productRepository.findAll();
    }
    
    @CacheEvict(value = "products", allEntries = true)
    public Product saveProduct(Product product) {
        return productRepository.save(product);
    }
}
```

### 5. æ•°æ®å®‰å…¨å¢å¼º

#### APIæƒé™æ§åˆ¶
```java
@RestController
@RequestMapping("/api/orders")
public class OrderController {
    @PreAuthorize("hasRole('USER') or hasRole('ADMIN')")
    @GetMapping("/customer/{customerId}")
    public ResponseEntity<List<Order>> getOrdersByCustomer(@PathVariable Long customerId) {
        // éªŒè¯ç”¨æˆ·åªèƒ½æŸ¥çœ‹è‡ªå·±çš„è®¢å•
        if (!isCurrentUser(customerId)) {
            return ResponseEntity.status(HttpStatus.FORBIDDEN).build();
        }
        return ResponseEntity.ok(orderService.getOrdersByCustomer(customerId));
    }
}
```

#### æ•æ„Ÿæ•°æ®è¿‡æ»¤
```java
@JsonIgnore
private String password;

@JsonProperty(access = JsonProperty.Access.WRITE_ONLY)
private String creditCardNumber;
```

## ğŸ§ª æµ‹è¯•éªŒè¯

### ä½¿ç”¨æµ‹è¯•å·¥å…·
æˆ‘å·²åˆ›å»ºäº†ä¸€ä¸ªå®Œæ•´çš„æµ‹è¯•é¡µé¢ `test-frontend-backend.html`ï¼Œå¯ä»¥éªŒè¯ï¼š
- åç«¯æœåŠ¡çŠ¶æ€
- ç”¨æˆ·è®¤è¯åŠŸèƒ½
- å•†å“æ•°æ®CRUD
- è®¢å•ç®¡ç†åŠŸèƒ½
- æ•°æ®æŒä¹…åŒ–éªŒè¯

### æµ‹è¯•æ­¥éª¤
1. å¯åŠ¨åç«¯æœåŠ¡ï¼š`mvn spring-boot:run`
2. å¯åŠ¨å‰ç«¯æœåŠ¡ï¼š`cd frontend && npm run serve`
3. æ‰“å¼€æµ‹è¯•é¡µé¢ï¼š`test-frontend-backend.html`
4. æŒ‰é¡ºåºæ‰§è¡Œå„é¡¹æµ‹è¯•

## ğŸ“Š å½“å‰çŠ¶æ€è¯„ä¼°

### ä¼˜ç§€æ–¹é¢
- âœ… **æ¶æ„æ¸…æ™°**: å‰åç«¯åˆ†ç¦»ï¼ŒAPIè®¾è®¡RESTful
- âœ… **æ•°æ®æµé€š**: å‰ç«¯æˆåŠŸè°ƒç”¨åç«¯APIè·å–å’Œæ›´æ–°æ•°æ®
- âœ… **çŠ¶æ€ç®¡ç†**: Vuexç»Ÿä¸€ç®¡ç†åº”ç”¨çŠ¶æ€
- âœ… **é”™è¯¯å¤„ç†**: å…·å¤‡åŸºæœ¬çš„é”™è¯¯å¤„ç†å’Œé™çº§æœºåˆ¶
- âœ… **ç”¨æˆ·ä½“éªŒ**: åŠ è½½çŠ¶æ€ã€é”™è¯¯æç¤ºç­‰ç”¨æˆ·åé¦ˆ

### éœ€è¦æ”¹è¿›
- ğŸ”„ **è´­ç‰©è½¦åŒæ­¥**: è´­ç‰©è½¦æ•°æ®ä»…åœ¨å‰ç«¯ï¼Œå»ºè®®åŒæ­¥åˆ°åç«¯
- ğŸ”„ **å®æ—¶æ›´æ–°**: ç¼ºå°‘WebSocketå®æ—¶æ•°æ®æ¨é€
- ğŸ”„ **ç¼“å­˜æœºåˆ¶**: å¯ä»¥æ·»åŠ å‰åç«¯ç¼“å­˜æå‡æ€§èƒ½
- ğŸ”„ **æƒé™æ§åˆ¶**: éœ€è¦æ›´ç»†ç²’åº¦çš„æƒé™éªŒè¯
- ğŸ”„ **æ•°æ®éªŒè¯**: å‰åç«¯éªŒè¯å¯ä»¥æ›´åŠ ä¸¥æ ¼

## ğŸ¯ æ€»ç»“

é¡¹ç›®çš„å‰åç«¯è¿æ¥å·²ç»åŸºæœ¬å®Œæˆï¼Œæ•°æ®èƒ½å¤Ÿæ­£å¸¸æµé€šï¼š

1. **å‰ç«¯é¡µé¢èƒ½å¤ŸæˆåŠŸä»åç«¯æ•°æ®åº“è·å–æ•°æ®**æ˜¾ç¤º
2. **å‰ç«¯æ›´æ–°çš„å†…å®¹èƒ½å¤Ÿä¿å­˜åˆ°åç«¯æ•°æ®åº“**ä¸­
3. **ç”¨æˆ·è®¤è¯ã€å•†å“ç®¡ç†ã€è®¢å•å¤„ç†**ç­‰æ ¸å¿ƒåŠŸèƒ½è¿è¡Œæ­£å¸¸
4. **é”™è¯¯å¤„ç†æœºåˆ¶**ç¡®ä¿äº†ç³»ç»Ÿçš„ç¨³å®šæ€§

å»ºè®®æŒ‰ç…§ä¸Šè¿°ä¼˜åŒ–å»ºè®®é€æ­¥å®Œå–„ç³»ç»Ÿï¼Œç‰¹åˆ«æ˜¯è´­ç‰©è½¦æ•°æ®åŒæ­¥å’Œå®æ—¶æ›´æ–°åŠŸèƒ½ï¼Œè¿™å°†å¤§å¤§æå‡ç”¨æˆ·ä½“éªŒå’Œæ•°æ®ä¸€è‡´æ€§ã€‚

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨è®¡åˆ’

1. **çŸ­æœŸç›®æ ‡** (1-2å‘¨):
   - å®ç°è´­ç‰©è½¦åç«¯APIå’Œæ•°æ®åŒæ­¥
   - å®Œå–„å‰åç«¯æ•°æ®éªŒè¯
   - æ·»åŠ APIæƒé™æ§åˆ¶

2. **ä¸­æœŸç›®æ ‡** (3-4å‘¨):
   - å®ç°WebSocketå®æ—¶æ›´æ–°
   - æ·»åŠ ç¼“å­˜æœºåˆ¶æå‡æ€§èƒ½
   - å®Œå–„é”™è¯¯ç›‘æ§å’Œæ—¥å¿—è®°å½•

3. **é•¿æœŸç›®æ ‡** (1-2æœˆ):
   - æ·»åŠ æ”¯ä»˜é›†æˆ
   - å®ç°å•†å“æ¨èç®—æ³•
   - å®Œå–„ç®¡ç†åå°åŠŸèƒ½ 